<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUNOæ­Œè©ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ç”Ÿæˆãƒ„ãƒ¼ãƒ«</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .login-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .ai-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .ai-option {
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 25px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ai-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .google-login {
            background: #4285f4;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .google-login:hover {
            background: #3367d6;
            transform: translateY(-2px);
        }

        .form-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .mood-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .mood-option {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            font-size: 0.9rem;
        }

        .mood-option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .mood-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .reference-section {
            background: #fff8e1;
            border: 2px solid #ffeb3b;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .reference-section h4 {
            color: #f57f17;
            margin-bottom: 15px;
            text-align: center;
        }

        .reference-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .time-slider {
            margin: 20px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
            appearance: none;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .image-upload-area {
            border: 2px dashed #667eea;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9ff;
            margin-bottom: 15px;
        }

        .image-upload-area:hover {
            border-color: #5a67d8;
            background: #f0f4ff;
            transform: translateY(-2px);
        }

        .image-upload-area.dragover {
            border-color: #4c51bf;
            background: #e6fffa;
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .upload-placeholder p {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .upload-placeholder small {
            color: #666;
            font-size: 0.85rem;
        }

        .image-preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .image-preview {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .image-preview img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            display: block;
        }

        .image-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-remove:hover {
            background: rgba(255, 0, 0, 1);
        }

        .image-analysis {
            background: #e8f4f8;
            border: 1px solid #bee5eb;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        .image-analysis h4 {
            color: #0c5460;
            margin-bottom: 8px;
        }

        .image-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }

        .image-tag {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
        }

        .generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .generate-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .result-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e0e0e0;
        }

        .result-box h3 {
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .lyrics-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-size: 0.9rem;
            line-height: 1.6;
            border-left: 4px solid #667eea;
            max-height: 400px;
            overflow-y: auto;
        }

        .copy-btn {
            background: #28a745;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px 5px 5px 0;
        }

        .copy-btn:hover {
            background: #218838;
        }

        .loading {
            text-align: center;
            padding: 40px;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .form-section {
                grid-template-columns: 1fr;
            }
            
            .results {
                grid-template-columns: 1fr;
            }
            
            .mood-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .ai-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .mood-option {
                padding: 8px;
                font-size: 0.8rem;
            }

            .reference-inputs {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸµ SUNOæ­Œè©ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ç”Ÿæˆãƒ„ãƒ¼ãƒ«</h1>
            <p>ã‚¿ã‚¤ãƒˆãƒ«ã¨ã‚¸ãƒ£ãƒ³ãƒ«ã‚’å…¥ã‚Œã‚‹ã ã‘ã§ã€AIãŒæ­Œè©ã¨SUNOã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™</p>
        </div>

        <div class="login-section">
            <h3>AIé¸æŠã¨ãƒ­ã‚°ã‚¤ãƒ³</h3>
            <div class="ai-selector">
                <div class="ai-option selected" data-ai="openai">OpenAI (GPT-4)</div>
                <div class="ai-option" data-ai="claude">Claude (Anthropic)</div>
            </div>
            <button class="google-login" onclick="handleGoogleLogin()">ğŸ” Googleã§ãƒ­ã‚°ã‚¤ãƒ³</button>
            <div id="login-status" class="status" style="display: none;"></div>
        </div>

        <div class="form-section">
            <div>
                <div class="form-group">
                    <label for="title">æ¥½æ›²ã‚¿ã‚¤ãƒˆãƒ«</label>
                    <input type="text" id="title" placeholder="ä¾‹ï¼šå¤ã®æ€ã„å‡º">
                </div>

                <div class="form-group">
                    <label for="genre">ã‚¸ãƒ£ãƒ³ãƒ«</label>
                    <select id="genre">
                        <option value="">ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠ</option>
                        <option value="j-pop">J-POP</option>
                        <option value="rock">ãƒ­ãƒƒã‚¯</option>
                        <option value="ballad">ãƒãƒ©ãƒ¼ãƒ‰</option>
                        <option value="electronic">ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ãƒƒã‚¯</option>
                        <option value="folk">ãƒ•ã‚©ãƒ¼ã‚¯</option>
                        <option value="jazz">ã‚¸ãƒ£ã‚º</option>
                        <option value="classical">ã‚¯ãƒ©ã‚·ãƒƒã‚¯</option>
                        <option value="hip-hop">ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—</option>
                        <option value="reggae">ãƒ¬ã‚²ã‚¨</option>
                        <option value="country">ã‚«ãƒ³ãƒˆãƒªãƒ¼</option>
                        <option value="blues">ãƒ–ãƒ«ãƒ¼ã‚¹</option>
                        <option value="funk">ãƒ•ã‚¡ãƒ³ã‚¯</option>
                    </select>
                </div>

                <div class="reference-section">
                    <h4>ğŸ¤ å‚è€ƒã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãƒ»æ¥½æ›²ï¼ˆä»»æ„ï¼‰</h4>
                    <div class="reference-inputs">
                        <input type="text" id="reference-artist" placeholder="å‚è€ƒã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå">
                        <input type="text" id="reference-song" placeholder="å‚è€ƒæ¥½æ›²å">
                    </div>
                    <small style="color: #f57f17; display: block; margin-top: 10px; text-align: center;">
                        â€»æ­Œè©ç”Ÿæˆã®å‚è€ƒã«ã—ã¾ã™ãŒã€ã‚¹ã‚¿ã‚¤ãƒ«ã‚¿ã‚°ã«ã¯å«ã‚ã¾ã›ã‚“
                    </small>
                </div>

                <div class="form-group" style="display: none;">
                    <label>é›°å›²æ°—ãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
                    <div class="mood-grid">
                        <div class="mood-option" data-mood="happy">æ˜ã‚‹ã„</div>
                        <div class="mood-option" data-mood="sad">æ‚²ã—ã„</div>
                        <div class="mood-option" data-mood="energetic">ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥</div>
                        <div class="mood-option" data-mood="calm">ç©ã‚„ã‹</div>
                        <div class="mood-option" data-mood="romantic">ãƒ­ãƒãƒ³ãƒãƒƒã‚¯</div>
                        <div class="mood-option" data-mood="nostalgic">ãƒã‚¹ã‚¿ãƒ«ã‚¸ãƒƒã‚¯</div>
                        <div class="mood-option" data-mood="mysterious">ç¥ç§˜çš„</div>
                        <div class="mood-option" data-mood="powerful">åŠ›å¼·ã„</div>
                        <div class="mood-option" data-mood="gentle">å„ªã—ã„</div>
                        <div class="mood-option" data-mood="dark">ãƒ€ãƒ¼ã‚¯</div>
                        <div class="mood-option" data-mood="dreamy">å¤¢å¹»çš„</div>
                        <div class="mood-option" data-mood="epic">å£®å¤§</div>
                        <div class="mood-option" data-mood="cute">å¯æ„›ã„</div>
                        <div class="mood-option" data-mood="cool">ã‚¯ãƒ¼ãƒ«</div>
                        <div class="mood-option" data-mood="emotional">æ„Ÿæƒ…çš„</div>
                        <div class="mood-option" data-mood="playful">éŠã³å¿ƒ</div>
                        <div class="mood-option" data-mood="serious">çœŸé¢ç›®</div>
                        <div class="mood-option" data-mood="hopeful">å¸Œæœ›çš„</div>
                        <div class="mood-option" data-mood="melancholic">æ†‚é¬±</div>
                        <div class="mood-option" data-mood="triumphant">å‹åˆ©çš„</div>
                    </div>
                </div>
            </div>

            <div>
                <div class="form-group">
                    <label for="instruments">ã“ã ã‚ã‚Šãƒ»å…¥ã‚ŒãŸã„æ¥½å™¨ãƒ»è¦ç´ </label>
                    <textarea id="instruments" rows="4" placeholder="ä¾‹ï¼šã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚®ã‚¿ãƒ¼ã€ãƒ”ã‚¢ãƒã‚½ãƒ­ã€ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©ç·¨æˆã€ã‚·ãƒ³ã‚»ã‚µã‚¤ã‚¶ãƒ¼ã€ã‚³ãƒ¼ãƒ©ã‚¹ã€ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼ã€ãƒ©ãƒƒãƒ—ãƒ‘ãƒ¼ãƒˆã€ã‚®ã‚¿ãƒ¼ã‚½ãƒ­ãªã©"></textarea>
                </div>

                <div class="form-group">
                    <label for="image-upload">å‚è€ƒç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</label>
                    <div class="image-upload-area" onclick="document.getElementById('image-input').click()">
                        <input type="file" id="image-input" accept="image/*" multiple style="display: none;">
                        <div class="upload-placeholder">
                            <div class="upload-icon">ğŸ“·</div>
                            <p>ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—</p>
                            <small>é›°å›²æ°—ã‚„ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å‚è€ƒã«ãªã‚‹ç”»åƒã‚’è¿½åŠ ã§ãã¾ã™</small>
                        </div>
                    </div>
                    <div id="image-preview" class="image-preview-container"></div>
                </div>

                <div class="form-group">
                    <label for="duration">æ¥½æ›²ã®é•·ã•ï¼š<span id="duration-display">3åˆ†</span></label>
                    <div class="time-slider">
                        <input type="range" id="duration" class="slider" min="1" max="10" value="3" step="0.5">
                    </div>
                </div>

                <div class="form-group">
                    <label for="additional">è¿½åŠ ã®è¦æœ›</label>
                    <textarea id="additional" rows="3" placeholder="ãã®ä»–ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚ã‚Œã°è¨˜å…¥ã—ã¦ãã ã•ã„"></textarea>
                </div>
            </div>
        </div>

        <button class="generate-btn" onclick="generateLyrics()">ğŸ¼ æ­Œè©ã¨ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç”Ÿæˆ</button>

        <div id="loading" class="loading" style="display: none;">
            <div class="loading-spinner"></div>
            <p>AIãŒæ­Œè©ã¨ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç”Ÿæˆä¸­ã§ã™...</p>
        </div>

        <div id="results" class="results" style="display: none;">
            <div class="result-box">
                <h3>ğŸ“ ç”Ÿæˆã•ã‚ŒãŸæ­Œè©</h3>
                <h4>æ¼¢å­—ç‰ˆ</h4>
                <div id="lyrics-kanji" class="lyrics-box"></div>
                <button class="copy-btn" onclick="copyToClipboard('lyrics-kanji')">æ¼¢å­—ç‰ˆã‚’ã‚³ãƒ”ãƒ¼</button>
                
                <h4>ã²ã‚‰ãŒãªç‰ˆ</h4>
                <div id="lyrics-hiragana" class="lyrics-box"></div>
                <button class="copy-btn" onclick="copyToClipboard('lyrics-hiragana')">ã²ã‚‰ãŒãªç‰ˆã‚’ã‚³ãƒ”ãƒ¼</button>
            </div>

            <div class="result-box">
                <h3>ğŸ¨ SUNOã‚¹ã‚¿ã‚¤ãƒ«ã‚¿ã‚°ï¼ˆè‹±èªï¼‰</h3>
                <div id="style-tags" class="lyrics-box"></div>
                <button class="copy-btn" onclick="copyToClipboard('style-tags')">ã‚¹ã‚¿ã‚¤ãƒ«ã‚¿ã‚°ã‚’ã‚³ãƒ”ãƒ¼</button>
                
                <h3>ğŸ“Š ç”Ÿæˆæƒ…å ±</h3>
                <div id="generation-info" class="lyrics-box"></div>
            </div>
        </div>
    </div>

    <script>
        let selectedAI = 'openai';
        let selectedMoods = [];
        let isLoggedIn = false;
        let uploadedImages = [];

        // ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
        const imageInput = document.getElementById('image-input');
        const uploadArea = document.querySelector('.image-upload-area');
        const previewContainer = document.getElementById('image-preview');

        // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
        imageInput.addEventListener('change', handleFileSelect);

        // ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files).filter(file => file.type.startsWith('image/'));
            processFiles(files);
        });

        function handleFileSelect(e) {
            const files = Array.from(e.target.files);
            processFiles(files);
        }

        function processFiles(files) {
            files.forEach(file => {
                if (uploadedImages.length >= 5) {
                    alert('ç”»åƒã¯æœ€å¤§5æšã¾ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™');
                    return;
                }

                const reader = new FileReader();
                reader.onload = (e) => {
                    const imageData = {
                        id: Date.now() + Math.random(),
                        file: file,
                        dataUrl: e.target.result,
                        analysis: analyzeImage(file.name)
                    };
                    uploadedImages.push(imageData);
                    displayImagePreview(imageData);
                };
                reader.readAsDataURL(file);
            });
        }

        function displayImagePreview(imageData) {
            const previewDiv = document.createElement('div');
            previewDiv.className = 'image-preview';
            previewDiv.innerHTML = `
                <img src="${imageData.dataUrl}" alt="Preview">
                <button class="image-remove" onclick="removeImage(${imageData.id})">Ã—</button>
            `;
            previewContainer.appendChild(previewDiv);

            if (uploadedImages.length === 1) {
                displayImageAnalysis();
            }
        }

        function removeImage(id) {
            uploadedImages = uploadedImages.filter(img => img.id !== id);
            updateImagePreview();
            if (uploadedImages.length === 0) {
                document.getElementById('image-analysis')?.remove();
            }
        }

        function updateImagePreview() {
            previewContainer.innerHTML = '';
            uploadedImages.forEach(imageData => {
                displayImagePreview(imageData);
            });
        }

        function analyzeImage(filename) {
            const keywords = filename.toLowerCase();
            const analysis = {
                mood: [],
                style: [],
                colors: [],
                elements: []
            };

            if (keywords.includes('sunset') || keywords.includes('å¤•æ—¥') || keywords.includes('å¤•ç„¼ã‘')) {
                analysis.mood.push('romantic', 'nostalgic', 'warm');
                analysis.colors.push('orange', 'warm');
            }
            if (keywords.includes('night') || keywords.includes('å¤œ') || keywords.includes('moon')) {
                analysis.mood.push('mysterious', 'calm', 'dreamy');
                analysis.colors.push('dark', 'blue');
            }
            if (keywords.includes('flower') || keywords.includes('èŠ±') || keywords.includes('spring')) {
                analysis.mood.push('gentle', 'romantic', 'hopeful');
                analysis.style.push('natural', 'soft');
            }
            if (keywords.includes('city') || keywords.includes('è¡—') || keywords.includes('urban')) {
                analysis.mood.push('energetic', 'modern', 'cool');
                analysis.style.push('urban', 'dynamic');
            }
            if (keywords.includes('ocean') || keywords.includes('sea') || keywords.includes('æµ·')) {
                analysis.mood.push('calm', 'epic', 'emotional');
                analysis.colors.push('blue', 'refreshing');
            }

            return analysis;
        }

        function displayImageAnalysis() {
            const existingAnalysis = document.getElementById('image-analysis');
            if (existingAnalysis) existingAnalysis.remove();

            const analysisDiv = document.createElement('div');
            analysisDiv.id = 'image-analysis';
            analysisDiv.className = 'image-analysis';
            
            const combinedAnalysis = combineImageAnalyses();
            
            analysisDiv.innerHTML = `
                <h4>ğŸ–¼ï¸ ç”»åƒã‹ã‚‰åˆ†æã•ã‚ŒãŸè¦ç´ </h4>
                <p>ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸç”»åƒã‹ã‚‰ä»¥ä¸‹ã®è¦ç´ ã‚’æ¤œå‡ºã—ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã¯è‡ªå‹•çš„ã«æ­Œè©ç”Ÿæˆã«åæ˜ ã•ã‚Œã¾ã™ã€‚</p>
                <div class="image-tags">
                    ${combinedAnalysis.mood.map(mood => `<span class="image-tag">${mood}</span>`).join('')}
                    ${combinedAnalysis.style.map(style => `<span class="image-tag">${style}</span>`).join('')}
                    ${combinedAnalysis.colors.map(color => `<span class="image-tag">${color}</span>`).join('')}
                </div>
            `;

            uploadArea.parentNode.insertBefore(analysisDiv, uploadArea.nextSibling);
        }

        function combineImageAnalyses() {
            const combined = { mood: new Set(), style: new Set(), colors: new Set() };
            
            uploadedImages.forEach(img => {
                img.analysis.mood.forEach(m => combined.mood.add(m));
                img.analysis.style.forEach(s => combined.style.add(s));
                img.analysis.colors.forEach(c => combined.colors.add(c));
            });

            return {
                mood: Array.from(combined.mood),
                style: Array.from(combined.style),
                colors: Array.from(combined.colors)
            };
        }

        // AIé¸æŠ
        document.querySelectorAll('.ai-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.ai-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                selectedAI = this.dataset.ai;
            });
        });

        // é›°å›²æ°—é¸æŠï¼ˆç„¡åŠ¹åŒ–ï¼‰
        document.querySelectorAll('.mood-option').forEach(option => {
            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’å‰Šé™¤ã¾ãŸã¯ç„¡åŠ¹åŒ–
            option.removeEventListener('click', function() {
                this.classList.toggle('selected');
                const mood = this.dataset.mood;
                if (selectedMoods.includes(mood)) {
                    selectedMoods = selectedMoods.filter(m => m !== mood);
                } else {
                    selectedMoods.push(mood);
                }
            });
        });

        // æ™‚é–“ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
        document.getElementById('duration').addEventListener('input', function() {
            document.getElementById('duration-display').textContent = this.value + 'åˆ†';
        });

        // Googleãƒ­ã‚°ã‚¤ãƒ³ï¼ˆãƒ‡ãƒ¢å®Ÿè£…ï¼‰
        function handleGoogleLogin() {
            const statusDiv = document.getElementById('login-status');
            statusDiv.style.display = 'block';
            statusDiv.className = 'status';
            statusDiv.textContent = 'ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ä¸­...';

            setTimeout(() => {
                isLoggedIn = true;
                statusDiv.className = 'status success';
                statusDiv.textContent = `âœ… ${selectedAI.toUpperCase()}ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ`;
            }, 1500);
        }

        // æ­Œè©ç”Ÿæˆ
        async function generateLyrics() {
            if (!isLoggedIn) {
                alert('å…ˆã«Googleã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„');
                return;
            }

            const title = document.getElementById('title').value;
            const genre = document.getElementById('genre').value;
            const instruments = document.getElementById('instruments').value;
            const duration = document.getElementById('duration').value;
            const additional = document.getElementById('additional').value;
            const referenceArtist = document.getElementById('reference-artist').value;
            const referenceSong = document.getElementById('reference-song').value;

            if (!title || !genre) {
                alert('ã‚¿ã‚¤ãƒˆãƒ«ã¨ã‚¸ãƒ£ãƒ³ãƒ«ã¯å¿…é ˆã§ã™');
                return;
            }

            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            document.querySelector('.generate-btn').disabled = true;

            try {
                await new Promise(resolve => setTimeout(resolve, 3000));

                const imageAnalysis = uploadedImages.length > 0 ? combineImageAnalyses() : null;
                const generatedLyrics = generateMockLyrics(title, genre, selectedMoods, duration, imageAnalysis, instruments, referenceArtist, referenceSong);
                const styleTag = generateStyleTag(genre, selectedMoods, instruments, imageAnalysis, referenceArtist, referenceSong);

                displayResults(generatedLyrics, styleTag);
            } catch (error) {
                alert('ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message);
            } finally {
                document.getElementById('loading').style.display = 'none';
                document.querySelector('.generate-btn').disabled = false;
            }
        }

        // ãƒ¢ãƒƒã‚¯æ­Œè©ç”Ÿæˆï¼ˆå…¨è¦ç´ åæ˜ ï¼‰
        function generateMockLyrics(title, genre, moods, duration, imageAnalysis, instruments, referenceArtist, referenceSong) {
            let lyricsTemplate = `[Verse 1]
${title}ãŒå¿ƒã«éŸ¿ã„ã¦
é¢¨ã®ã‚ˆã†ã«éãå»ã£ãŸæ—¥ã€…
æ€ã„å‡ºã¯è‰²è¤ªã›ã‚‹ã“ã¨ãªã
ä»Šã§ã‚‚èƒ¸ã®å¥¥ã§å…‰ã£ã¦ã‚‹

[Chorus]
ã‚ã®å¤ã®ç©ºã®ä¸‹ã§
å›ã¨éã”ã—ãŸæ™‚é–“ãŒ
æ°¸é ã«ç¶šãã‚ˆã†ãªæ°—ãŒã—ãŸ
${title}ã€å¿˜ã‚Œã¯ã—ãªã„

[Verse 2]
è¡—è§’ã§èã“ãˆã‚‹éŸ³æ¥½ãŒ
ã‚ã®é ƒã‚’æ€ã„å‡ºã•ã›ã‚‹
å¤‰ã‚ã‚‰ãªã„æƒ³ã„ã‚’èƒ¸ã«
ä»Šæ—¥ã‚‚ã¾ãŸæ­©ã„ã¦ã„ã“ã†

[Chorus]
ã‚ã®å¤ã®ç©ºã®ä¸‹ã§
å›ã¨éã”ã—ãŸæ™‚é–“ãŒ
æ°¸é ã«ç¶šãã‚ˆã†ãªæ°—ãŒã—ãŸ
${title}ã€å¿˜ã‚Œã¯ã—ãªã„

[Bridge]
æ™‚ãŒæµã‚Œã¦ã‚‚
å¿ƒã®ä¸­ã«ç”Ÿãã¦ã‚‹
å¤§åˆ‡ãªè¨˜æ†¶ãŸã¡

[Outro]
${title}ã‚ˆã€ã‚ã‚ŠãŒã¨ã†
ç¾ã—ã„æ€ã„å‡ºã‚’ãã‚Œã¦`;

            // é›°å›²æ°—ã«åŸºã¥ãæ­Œè©èª¿æ•´
            if (moods.includes('sad') || moods.includes('melancholic')) {
                lyricsTemplate = lyricsTemplate.replace('å…‰ã£ã¦ã‚‹', 'æ¶™ã«æ»²ã‚“ã§ã‚‹')
                    .replace('ç¾ã—ã„æ€ã„å‡º', 'åˆ‡ãªã„æ€ã„å‡º')
                    .replace('ã‚ã‚ŠãŒã¨ã†', 'ã•ã‚ˆãªã‚‰');
            }
            
            if (moods.includes('energetic') || moods.includes('powerful')) {
                lyricsTemplate = lyricsTemplate.replace('é¢¨ã®ã‚ˆã†ã«', 'ç¨²å¦»ã®ã‚ˆã†ã«')
                    .replace('ç©ã‚„ã‹ã«', 'åŠ›å¼·ã')
                    .replace('æ­©ã„ã¦ã„ã“ã†', 'é§†ã‘æŠœã‘ã¦ã„ã“ã†');
            }

            if (moods.includes('romantic')) {
                lyricsTemplate = lyricsTemplate.replace('å‹é”', 'æ‹äºº')
                    .replace('æ€ã„å‡º', 'æ„›ã®è¨˜æ†¶')
                    .replace('å¿ƒã«', 'æ„›ã—ã„å¿ƒã«');
            }

            if (moods.includes('mysterious') || moods.includes('dark')) {
                lyricsTemplate = lyricsTemplate.replace('æ˜ã‚‹ã„', 'ç¥ç§˜çš„ãª')
                    .replace('å…‰ã£ã¦ã‚‹', 'é—‡ã«éš ã‚Œã¦ã‚‹')
                    .replace('å¤ã®ç©º', 'æœˆå¤œã®ç©º');
            }

            // æ¥½å™¨ãƒ»è¦ç´ ã«åŸºã¥ãèª¿æ•´
            if (instruments.includes('ãƒ”ã‚¢ãƒ') || instruments.includes('piano')) {
                lyricsTemplate = lyricsTemplate.replace('éŸ³æ¥½ãŒ', 'ãƒ”ã‚¢ãƒã®éŸ³è‰²ãŒ');
            }
            if (instruments.includes('ã‚®ã‚¿ãƒ¼') || instruments.includes('guitar')) {
                lyricsTemplate = lyricsTemplate.replace('éŸ¿ã„ã¦', 'ã‚®ã‚¿ãƒ¼ã¨å…±ã«éŸ¿ã„ã¦');
            }
            if (instruments.includes('ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©')) {
                lyricsTemplate = lyricsTemplate.replace('ç¾ã—ã„', 'å£®å¤§ã§ç¾ã—ã„');
            }
            if (instruments.includes('ã‚³ãƒ¼ãƒ©ã‚¹') || instruments.includes('ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼')) {
                lyricsTemplate = lyricsTemplate.replace('[Chorus]', '[Chorus]\nï¼ˆã¿ã‚“ãªã§æ­ŒãŠã†ï¼‰');
            }

            // ç”»åƒåˆ†æçµæœã«åŸºã¥ãèª¿æ•´
            if (imageAnalysis) {
                if (imageAnalysis.mood.includes('romantic')) {
                    lyricsTemplate = lyricsTemplate.replace('å¤ã®ç©º', 'å¤•ç„¼ã‘ç©º').replace('å…‰ã£ã¦ã‚‹', 'å„ªã—ãè¼ã„ã¦ã‚‹');
                }
                if (imageAnalysis.mood.includes('mysterious')) {
                    lyricsTemplate = lyricsTemplate.replace('å…‰ã£ã¦ã‚‹', 'ç¥ç§˜çš„ã«å…‰ã£ã¦ã‚‹');
                }
                if (imageAnalysis.colors.includes('orange')) {
                    lyricsTemplate = lyricsTemplate.replace('ç©º', 'ã‚ªãƒ¬ãƒ³ã‚¸è‰²ã®ç©º');
                }
                if (imageAnalysis.style.includes('urban')) {
                    lyricsTemplate = lyricsTemplate.replace('é¢¨ã®ã‚ˆã†ã«', 'ãƒã‚ªãƒ³ã®å…‰ã®ã‚ˆã†ã«');
                }
                if (imageAnalysis.colors.includes('blue')) {
                    lyricsTemplate = lyricsTemplate.replace('ç©º', 'é’ã„ç©º');
                }
            }

            // å‚è€ƒã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãƒ»æ¥½æ›²ã®å½±éŸ¿ï¼ˆæ­Œè©ã‚¹ã‚¿ã‚¤ãƒ«ã«åæ˜ ã€åå‰ã¯å«ã‚ãªã„ï¼‰
            if (referenceArtist || referenceSong) {
                if (referenceArtist.toLowerCase().includes('ballad') || referenceSong.toLowerCase().includes('ballad')) {
                    lyricsTemplate = lyricsTemplate.replace('æ­©ã„ã¦ã„ã“ã†', 'ãã£ã¨æ­©ã„ã¦ã„ã“ã†');
                }
                // ã‚ˆã‚Šè¤‡é›‘ãªã‚¹ã‚¿ã‚¤ãƒ«åˆ†æã‚‚å¯èƒ½ï¼ˆå®Ÿéš›ã®AIã§ã¯ã‚ˆã‚Šé«˜åº¦ãªåˆ†æï¼‰
            }

            // å®Œå…¨ã²ã‚‰ãŒãªç‰ˆã®ä½œæˆï¼ˆã™ã¹ã¦ã®æ¼¢å­—ã‚’ã²ã‚‰ãŒãªã«å¤‰æ›ï¼‰
            const kanjiToHiragana = {
                'å¿ƒ': 'ã“ã“ã‚', 'éŸ¿': 'ã²ã³', 'é¢¨': 'ã‹ãœ', 'é': 'ã™', 'å»': 'ã•', 'æ—¥ã€…': 'ã²ã³',
                'æ€': 'ãŠã‚‚', 'å‡º': 'ã§', 'è‰²': 'ã„ã‚', 'è¤ª': 'ã‚', 'ä»Š': 'ã„ã¾', 'èƒ¸': 'ã‚€ã­',
                'å¥¥': 'ãŠã', 'å…‰': 'ã²ã‹', 'å¤': 'ãªã¤', 'ç©º': 'ãã‚‰', 'ä¸‹': 'ã—ãŸ', 'å›': 'ãã¿',
                'é': 'ã™', 'æ™‚é–“': 'ã˜ã‹ã‚“', 'æ°¸é ': 'ãˆã„ãˆã‚“', 'ç¶š': 'ã¤ã¥', 'æ°—': 'ã',
                'å¿˜': 'ã‚ã™', 'è¡—': 'ã¾ã¡', 'è§’': 'ã‹ã©', 'è': 'ã', 'éŸ³': 'ãŠã¨', 'æ¥½': 'ãŒã',
                'é ƒ': 'ã“ã‚', 'æ€': 'ãŠã‚‚', 'å¤‰': 'ã‹', 'æƒ³': 'ãŠã‚‚', 'æ­©': 'ã‚ã‚‹', 'æ™‚': 'ã¨ã',
                'æµ': 'ãªãŒ', 'ä¸­': 'ãªã‹', 'ç”Ÿ': 'ã„', 'å¤§': 'ãŠãŠ', 'åˆ‡': 'ã›ã¤', 'è¨˜': 'ã',
                'æ†¶': 'ãŠã', 'ç¾': 'ã†ã¤ã', 'æ¶™': 'ãªã¿ã ', 'æ»²': 'ã«ã˜', 'åˆ‡': 'ã›ã¤',
                'ç¨²': 'ã„ãª', 'å¦»': 'ã¥ã¾', 'ç©': 'ãŠã ', 'åŠ›': 'ã¡ã‹ã‚‰', 'å¼·': 'ã¥ã‚ˆ', 'é§†': 'ã‹',
                'æŠœ': 'ã¬', 'å‹': 'ã¨ã‚‚', 'é”': 'ã ã¡', 'æ‹': 'ã“ã„', 'äºº': 'ã²ã¨', 'æ„›': 'ã‚ã„',
                'æ„›': 'ã„ã¨', 'æ˜': 'ã‚ã‹', 'ç¥': 'ã—ã‚“', 'ç§˜': 'ã²', 'çš„': 'ã¦ã', 'é—‡': 'ã‚„ã¿',
                'éš ': 'ã‹ã', 'æœˆ': 'ã¤ã', 'å¤œ': 'ã‚ˆã‚‹', 'éŸ³': 'ãŠã¨', 'è‰²': 'ã„ã‚', 'å…±': 'ã¨ã‚‚',
                'å£®': 'ãã†', 'å¤§': 'ã ã„', 'æ­Œ': 'ã†ãŸ', 'å„ª': 'ã‚„ã•', 'è¼': 'ã‹ãŒã‚„', 'é’': 'ã‚ãŠ',
                'æœ€': 'ã•ã„', 'é«˜': 'ã“ã†', 'æ–°': 'ã‚ãŸã‚‰'
            };

            let hiraganaLyrics = lyricsTemplate;
            
            // ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªæ¼¢å­—â†’ã²ã‚‰ãŒãªå¤‰æ›
            Object.keys(kanjiToHiragana).forEach(kanji => {
                const regex = new RegExp(kanji, 'g');
                hiraganaLyrics = hiraganaLyrics.replace(regex, kanjiToHiragana[kanji]);
            });

            // æ®‹ã‚Šã®ä¸€èˆ¬çš„ãªæ¼¢å­—ã‚‚å¤‰æ›
            hiraganaLyrics = hiraganaLyrics
                .replace(/ä½•/g, 'ãªã«')
                .replace(/èª°/g, 'ã ã‚Œ')
                .replace(/è¦‹/g, 'ã¿')
                .replace(/è¨€/g, 'ã„')
                .replace(/æ¥/g, 'ã')
                .replace(/è¡Œ/g, 'ã„')
                .replace(/çŸ¥/g, 'ã—')
                .replace(/åˆ†/g, 'ã‚')
                .replace(/æœ¬/g, 'ã»ã‚“')
                .replace(/äºº/g, 'ã²ã¨')
                .replace(/æ‰‹/g, 'ã¦')
                .replace(/ç›®/g, 'ã‚')
                .replace(/å£/g, 'ãã¡')
                .replace(/è€³/g, 'ã¿ã¿')
                .replace(/è¶³/g, 'ã‚ã—')
                .replace(/é ­/g, 'ã‚ãŸã¾')
                .replace(/é¡”/g, 'ã‹ãŠ')
                .replace(/å£°/g, 'ã“ãˆ')
                .replace(/ä½“/g, 'ã‹ã‚‰ã ')
                .replace(/æ¯/g, 'ã¾ã„')
                .replace(/æ–¹/g, 'ã‹ãŸ')
                .replace(/äº‹/g, 'ã“ã¨')
                .replace(/ç‰©/g, 'ã‚‚ã®')
                .replace(/æ‰€/g, 'ã¨ã“ã‚')
                .replace(/å ´/g, 'ã°')
                .replace(/é“/g, 'ã¿ã¡')
                .replace(/å®¶/g, 'ã„ãˆ')
                .replace(/å­¦/g, 'ãŒã')
                .replace(/æ ¡/g, 'ã“ã†')
                .replace(/å…ˆ/g, 'ã•ã')
                .replace(/ç”Ÿ/g, 'ã›ã„');

            return { kanji: lyricsTemplate, hiragana: hiraganaLyrics };
        }

        // ã‚¹ã‚¿ã‚¤ãƒ«ã‚¿ã‚°ç”Ÿæˆï¼ˆè‹±èªç¿»è¨³ï¼‰
        function generateStyleTag(genre, moods, instruments, imageAnalysis, referenceArtist, referenceSong) {
            let styleElements = [];

            // ã‚¸ãƒ£ãƒ³ãƒ«ã®è‹±èªå¤‰æ›
            const genreMap = {
                'j-pop': 'J-Pop',
                'rock': 'Rock',
                'ballad': 'Ballad',
                'electronic': 'Electronic',
                'folk': 'Folk',
                'jazz': 'Jazz',
                'classical': 'Classical',
                'hip-hop': 'Hip-Hop',
                'reggae': 'Reggae',
                'country': 'Country',
                'blues': 'Blues',
                'funk': 'Funk'
            };
            styleElements.push(genreMap[genre] || genre);
            
            // å‚è€ƒã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãƒ»æ¥½æ›²ã®é›°å›²æ°—ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«åæ˜ 
            if (referenceArtist || referenceSong) {
                const referencePrompt = getReferencePrompt(referenceArtist, referenceSong);
                if (referencePrompt) {
                    styleElements.push(referencePrompt);
                }
            }

            // æ¥½å™¨ãƒ»è¦ç´ ã®è‹±èªå¤‰æ›
            if (instruments) {
                const instrumentMap = {
                    'ã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚®ã‚¿ãƒ¼': 'acoustic guitar',
                    'ã‚¨ãƒ¬ã‚­ã‚®ã‚¿ãƒ¼': 'electric guitar',
                    'ã‚®ã‚¿ãƒ¼': 'guitar',
                    'ãƒ”ã‚¢ãƒ': 'piano',
                    'ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰': 'keyboard',
                    'ãƒ‰ãƒ©ãƒ ': 'drums',
                    'ãƒ™ãƒ¼ã‚¹': 'bass',
                    'ãƒã‚¤ã‚ªãƒªãƒ³': 'violin',
                    'ã‚µãƒƒã‚¯ã‚¹': 'saxophone',
                    'ãƒˆãƒ©ãƒ³ãƒšãƒƒãƒˆ': 'trumpet',
                    'ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©': 'orchestral',
                    'ã‚·ãƒ³ã‚»ã‚µã‚¤ã‚¶ãƒ¼': 'synthesizer',
                    'ã‚³ãƒ¼ãƒ©ã‚¹': 'chorus',
                    'ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼': 'harmony',
                    'ãƒ©ãƒƒãƒ—': 'rap',
                    'ã‚½ãƒ­': 'solo',
                    'ç·¨æˆ': 'arrangement'
                };

                let englishInstruments = instruments;
                Object.keys(instrumentMap).forEach(japanese => {
                    const regex = new RegExp(japanese, 'g');
                    englishInstruments = englishInstruments.replace(regex, instrumentMap[japanese]);
                });

                englishInstruments = englishInstruments.replace(/ã€/g, ', ');
                styleElements.push(englishInstruments);
            }
            
            // ç”»åƒåˆ†æçµæœã®è‹±èªå¤‰æ›
            if (imageAnalysis) {
                const imageMoodMap = {
                    'warm': 'warm, cozy',
                    'refreshing': 'refreshing, crisp',
                    'natural': 'natural, organic',
                    'urban': 'urban, modern',
                    'dynamic': 'dynamic, energetic'
                };

                const combinedImageTags = new Set();
                imageAnalysis.mood.forEach(m => combinedImageTags.add(imageMoodMap[m] || m));
                imageAnalysis.style.forEach(s => combinedImageTags.add(s));
                imageAnalysis.colors.forEach(c => {
                    if (c === 'orange') combinedImageTags.add('warm tones, orange hues');
                    else if (c === 'blue') combinedImageTags.add('cool tones, blue atmosphere');
                    else if (c === 'dark') combinedImageTags.add('dark atmosphere, deep tones');
                    else if (c === 'warm') combinedImageTags.add('warm colors, golden tones');
                    else combinedImageTags.add(c);
                });
                
                if (combinedImageTags.size > 0) {
                    styleElements.push(Array.from(combinedImageTags).join(', '));
                }
            }

            // SUNOå›ºæœ‰ã®ã‚¿ã‚°ã‚’è¿½åŠ 
            styleElements.push('Japanese vocals, clear vocals, professional production, studio quality');

            return styleElements.join(', ');
        }

        // å‚è€ƒã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãƒ»æ¥½æ›²ã®é›°å›²æ°—ã‚’è¨€èªåŒ–ã™ã‚‹é–¢æ•°
        function getReferencePrompt(artist, song) {
            artist = (artist || '').toLowerCase();
            song = (song || '').toLowerCase();
            
            if (artist.includes('yonezu kenshi') || song.includes('lemon')) {
                return 'a bittersweet, emotional, and introspective sound with a unique, slightly distorted vocal style';
            }
            if (artist.includes('yoasobi') || song.includes('idol')) {
                return 'a dynamic, high-energy sound with intricate and rapid vocal melodies, a blend of pop and rock elements';
            }
            if (artist.includes('radwimps') || song.includes('zenzenzense')) {
                return 'an emotional and dramatic rock sound with a sense of urgency, featuring dynamic shifts and powerful vocals';
            }
            if (artist.includes('king gnu') || song.includes('hakujitsu')) {
                return 'a soulful and groovy sound with a mixture of soft and powerful vocals, often with jazz and funk elements';
            }
            if (artist.includes('official hige dandism') || song.includes('pretender')) {
                return 'a sophisticated and emotional pop sound with a lush arrangement and a soulful, high-pitched male vocal';
            }
            // Add more artists as needed
            return '';
        }

        // çµæœè¡¨ç¤º
        function displayResults(lyrics, styleTag) {
            document.getElementById('lyrics-kanji').textContent = lyrics.kanji;
            document.getElementById('lyrics-hiragana').textContent = lyrics.hiragana;
            document.getElementById('style-tags').textContent = styleTag;
            
            const referenceArtist = document.getElementById('reference-artist').value;
            const referenceSong = document.getElementById('reference-song').value;
            let referenceInfo = '';
            if (referenceArtist || referenceSong) {
                referenceInfo = `å‚è€ƒ: ${referenceArtist} - ${referenceSong}`;
            }
            
            const info = `ç”ŸæˆAI: ${selectedAI.toUpperCase()}
æ¥½æ›²æ™‚é–“: ${document.getElementById('duration').value}åˆ†
é›°å›²æ°—: ãªã— (è‡ªå‹•ç”Ÿæˆ)
ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»åƒ: ${uploadedImages.length}æš
${uploadedImages.length > 0 ? 'ç”»åƒåˆ†æ: é©ç”¨æ¸ˆã¿' : ''}
${referenceInfo}
ç”Ÿæˆæ—¥æ™‚: ${new Date().toLocaleString('ja-JP')}`;
            
            document.getElementById('generation-info').textContent = info;
            document.getElementById('results').style.display = 'grid';
        }

        // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        async function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).textContent;
            try {
                await navigator.clipboard.writeText(text);
                alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            } catch (err) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            }
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æ”¹è‰¯ç‰ˆSUNOæ­Œè©ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ç”Ÿæˆãƒ„ãƒ¼ãƒ«ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
        });
    </script>
</body>
</html>
